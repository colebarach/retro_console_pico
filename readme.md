# XY Display Library

This library aims to simplify the process of rendering X-Y graphics. It provides a common interface for generating X-Y waveforms on a variety of platforms, see the repository filesystem for a list of implementations.

## Notes

This library details the implementation and programming of a system that generates two analog voltages (X-Y). These signals may be used with an existing X-Y display (ex. oscilloscope), or with a custom X-Y renderer. For details on such a renderer see the sister respository (https://github.com/colebarach/crt_xy_monitor).

## Usage

This library exposes 2 main methods of generating X-Y waveforms: drawing and rendering

### Rendering

Rendering is the preferred method for using this library. Rendering is a method that offloads the work of drawing to a separate thread of execution. In a rendering system, the CPU specifies specific patterns to draw (shapes) and where to draw them (position). After this point, the rendering thread is responsible for updating the output at the specified update period (see below). The implementation of the rendering thread will vary platform to platform, the only requirement is that it can be invoked at fixed intervals and that it does not impede the execution of the CPU greatly.

To use the rendering system, include the `include/xy_renderer.h` header file.

### Drawing

Drawing is the process of writing data to the screen in real-time, that is, the CPU is directly responsible for updating the output. This method is not ideal for most applications due to the timing restrictions it imposes, see the rendering section above for a more useful system. The CPU must write to the output at specific intervals (the update period) in order to make the drawings appear uniform. With variations in this timing comes variations in brightness and form. Drawing is only appropriate for minimal applications where the display is the primary focus of the processor.

To use the drawing system, include the `include/xy_drawing.h` header file.

## Theory

### X-Y Monitors

An X-Y monitor uses two signals (X and Y) to control the position of a point on a screen. While the most common X-Y monitors are cathode ray televisions, this rendering method is not exclusive to such displays. For the purposes of this library, the X-Y signals will be analog voltages generated by a computer or microcontroller. It is the responsibility of the software to generate two 8-bit, unsigned integers which vary with time, while it is the responsibility of the hardware to convert these integers into analog voltages. The design of such hardware will be described briefly here, and in more detail in the platform-specific implementations.

As the point on the screen varies with time, it leaves a trail, this trail is how things are rendered. The trail is only visible for a certain period of time, to draw a static image this trail should be traced repeatedly to keep it visible. The number of times the trail is traced will be referred to as the frame rate. The lower the frame rate, the less the trail will appear to be continuous. A frame rate of 30 or greater is appropriate for most displays. The inverse of the frame rate is the frame period, or the amount of time it takes to draw a single frame.

The trail is subdivided into vectors, or units of movement. A trail can be defined as a sequence of vectors. Ideally the portion of the frame time each vector occupies is proportional to its size, but in practice this is not simple. Rather, each vector is assigned an equal portion of the frame time, and the size of each vector is clamped as to make them approximately equal. The amount of time each vector is assigned is referred to as the update period.

If the frame rate must be kept above 30 and the update period is fixed, there is a finite number of vectors that may be rendered. That is, there is a certain amount of detail associated with the selected update period. For an update period of 1us, the maximum number of vectors that can be drawn at a given time is 33,000. A higher update period is ideal, but puts a greater demand on hardware.
